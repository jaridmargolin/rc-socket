!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).RcSocket={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),i=function(t){try{return!!t()}catch(t){return!0}},u=!i((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),c={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,s={f:a&&!c.call({1:2},1)?function(t){var e=a(this,t);return!!e&&e.enumerable}:c},l=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,p=function(t){return f.call(t).slice(8,-1)},h="".split,v=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==p(t)?h.call(t,""):Object(t)}:Object,y=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},d=function(t){return v(y(t))},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},b=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,S=function(t,e){return m.call(t,e)},E=o.document,O=g(E)&&g(E.createElement),w=function(t){return O?E.createElement(t):{}},x=!u&&!i((function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a})),_=Object.getOwnPropertyDescriptor,T={f:u?_:function(t,e){if(t=d(t),e=b(e,!0),x)try{return _(t,e)}catch(t){}if(S(t,e))return l(!s.f.call(t,e),t[e])}},R=function(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t},k=Object.defineProperty,j={f:u?k:function(t,e,n){if(R(t),e=b(e,!0),R(n),x)try{return k(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=u?function(t,e,n){return j.f(t,e,l(1,n))}:function(t,e,n){return t[e]=n,t},P=function(t,e){try{I(o,t,e)}catch(n){o[t]=e}return e},C=o["__core-js_shared__"]||P("__core-js_shared__",{}),L=Function.toString;"function"!=typeof C.inspectSource&&(C.inspectSource=function(t){return L.call(t)});var N,A,M,D=C.inspectSource,G=o.WeakMap,F="function"==typeof G&&/native code/.test(D(G)),B=n((function(t){(t.exports=function(t,e){return C[t]||(C[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.0",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),z=0,H=Math.random(),U=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++z+H).toString(36)},W=B("keys"),K=function(t){return W[t]||(W[t]=U(t))},V={},Y=o.WeakMap;if(F){var q=new Y,Q=q.get,$=q.has,J=q.set;N=function(t,e){return J.call(q,t,e),e},A=function(t){return Q.call(q,t)||{}},M=function(t){return $.call(q,t)}}else{var X=K("state");V[X]=!0,N=function(t,e){return I(t,X,e),e},A=function(t){return S(t,X)?t[X]:{}},M=function(t){return S(t,X)}}var Z,tt,et={set:N,get:A,has:M,enforce:function(t){return M(t)?A(t):N(t,{})},getterFor:function(t){return function(e){var n;if(!g(e)||(n=A(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=n((function(t){var e=et.get,n=et.enforce,r=String(String).split("String");(t.exports=function(t,e,i,u){var c=!!u&&!!u.unsafe,a=!!u&&!!u.enumerable,s=!!u&&!!u.noTargetGet;"function"==typeof i&&("string"!=typeof e||S(i,"name")||I(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==o?(c?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=i:I(t,e,i)):a?t[e]=i:P(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||D(this)}))})),rt=o,ot=function(t){return"function"==typeof t?t:void 0},it=function(t,e){return arguments.length<2?ot(rt[t])||ot(o[t]):rt[t]&&rt[t][e]||o[t]&&o[t][e]},ut=Math.ceil,ct=Math.floor,at=function(t){return isNaN(t=+t)?0:(t>0?ct:ut)(t)},st=Math.min,lt=function(t){return t>0?st(at(t),9007199254740991):0},ft=Math.max,pt=Math.min,ht=function(t,e){var n=at(t);return n<0?ft(n+e,0):pt(n,e)},vt=function(t){return function(e,n,r){var o,i=d(e),u=lt(i.length),c=ht(r,u);if(t&&n!=n){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((t||c in i)&&i[c]===n)return t||c||0;return!t&&-1}},yt={includes:vt(!0),indexOf:vt(!1)}.indexOf,dt=function(t,e){var n,r=d(t),o=0,i=[];for(n in r)!S(V,n)&&S(r,n)&&i.push(n);for(;e.length>o;)S(r,n=e[o++])&&(~yt(i,n)||i.push(n));return i},gt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bt=gt.concat("length","prototype"),mt={f:Object.getOwnPropertyNames||function(t){return dt(t,bt)}},St={f:Object.getOwnPropertySymbols},Et=it("Reflect","ownKeys")||function(t){var e=mt.f(R(t)),n=St.f;return n?e.concat(n(t)):e},Ot=function(t,e){for(var n=Et(e),r=j.f,o=T.f,i=0;i<n.length;i++){var u=n[i];S(t,u)||r(t,u,o(e,u))}},wt=/#|\.prototype\./,xt=function(t,e){var n=Tt[_t(t)];return n==kt||n!=Rt&&("function"==typeof e?i(e):!!e)},_t=xt.normalize=function(t){return String(t).replace(wt,".").toLowerCase()},Tt=xt.data={},Rt=xt.NATIVE="N",kt=xt.POLYFILL="P",jt=xt,It=T.f,Pt=function(t,e){var n,r,i,u,c,a=t.target,s=t.global,l=t.stat;if(n=s?o:l?o[a]||P(a,{}):(o[a]||{}).prototype)for(r in e){if(u=e[r],i=t.noTargetGet?(c=It(n,r))&&c.value:n[r],!jt(s?r:a+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof u==typeof i)continue;Ot(u,i)}(t.sham||i&&i.sham)&&I(u,"sham",!0),nt(n,r,u,t)}},Ct=Array.isArray||function(t){return"Array"==p(t)},Lt=function(t){return Object(y(t))},Nt=function(t,e,n){var r=b(e);r in t?j.f(t,r,l(0,n)):t[r]=n},At=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Mt=At&&!Symbol.sham&&"symbol"==typeof Symbol(),Dt=B("wks"),Gt=o.Symbol,Ft=Mt?Gt:U,Bt=function(t){return S(Dt,t)||(At&&S(Gt,t)?Dt[t]=Gt[t]:Dt[t]=Ft("Symbol."+t)),Dt[t]},zt=Bt("species"),Ht=function(t,e){var n;return Ct(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ct(n.prototype)?g(n)&&null===(n=n[zt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ut=it("navigator","userAgent")||"",Wt=o.process,Kt=Wt&&Wt.versions,Vt=Kt&&Kt.v8;Vt?tt=(Z=Vt.split("."))[0]+Z[1]:Ut&&(!(Z=Ut.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=Ut.match(/Chrome\/(\d+)/))&&(tt=Z[1]);var Yt=tt&&+tt,qt=Bt("species"),Qt=function(t){return Yt>=51||!i((function(){var e=[];return(e.constructor={})[qt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},$t=Bt("isConcatSpreadable"),Jt=Yt>=51||!i((function(){var t=[];return t[$t]=!1,t.concat()[0]!==t})),Xt=Qt("concat"),Zt=function(t){if(!g(t))return!1;var e=t[$t];return void 0!==e?!!e:Ct(t)};Pt({target:"Array",proto:!0,forced:!Jt||!Xt},{concat:function(t){var e,n,r,o,i,u=Lt(this),c=Ht(u,0),a=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?u:arguments[e],Zt(i)){if(a+(o=lt(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,a++)n in i&&Nt(c,a,i[n])}else{if(a>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Nt(c,a++,i)}return c.length=a,c}});var te=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ee=function(t,e,n){if(te(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},ne=[].push,re=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,u=5==t||i;return function(c,a,s,l){for(var f,p,h=Lt(c),y=v(h),d=ee(a,s,3),g=lt(y.length),b=0,m=l||Ht,S=e?m(c,g):n?m(c,0):void 0;g>b;b++)if((u||b in y)&&(p=d(f=y[b],b,h),t))if(e)S[b]=p;else if(p)switch(t){case 3:return!0;case 5:return f;case 6:return b;case 2:ne.call(S,f)}else if(o)return!1;return i?-1:r||o?o:S}},oe={forEach:re(0),map:re(1),filter:re(2),some:re(3),every:re(4),find:re(5),findIndex:re(6)}.forEach,ie=function(t,e){var n=[][t];return!n||!i((function(){n.call(null,e||function(){throw 1},1)}))}("forEach")?function(t){return oe(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;Pt({target:"Array",proto:!0,forced:[].forEach!=ie},{forEach:ie});var ue,ce=Object.keys||function(t){return dt(t,gt)},ae=u?Object.defineProperties:function(t,e){R(t);for(var n,r=ce(e),o=r.length,i=0;o>i;)j.f(t,n=r[i++],e[n]);return t},se=it("document","documentElement"),le=K("IE_PROTO"),fe=function(){},pe=function(t){return"<script>"+t+"<\/script>"},he=function(){try{ue=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;he=ue?function(t){t.write(pe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ue):((e=w("iframe")).style.display="none",se.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(pe("document.F=Object")),t.close(),t.F);for(var n=gt.length;n--;)delete he.prototype[gt[n]];return he()};V[le]=!0;var ve=Object.create||function(t,e){var n;return null!==t?(fe.prototype=R(t),n=new fe,fe.prototype=null,n[le]=t):n=he(),void 0===e?n:ae(n,e)},ye=Bt("unscopables"),de=Array.prototype;null==de[ye]&&j.f(de,ye,{configurable:!0,value:ve(null)});var ge,be,me,Se=function(t){de[ye][t]=!0},Ee={},Oe=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),we=K("IE_PROTO"),xe=Object.prototype,_e=Oe?Object.getPrototypeOf:function(t){return t=Lt(t),S(t,we)?t[we]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xe:null},Te=Bt("iterator"),Re=!1;[].keys&&("next"in(me=[].keys())?(be=_e(_e(me)))!==Object.prototype&&(ge=be):Re=!0),null==ge&&(ge={}),S(ge,Te)||I(ge,Te,(function(){return this}));var ke={IteratorPrototype:ge,BUGGY_SAFARI_ITERATORS:Re},je=j.f,Ie=Bt("toStringTag"),Pe=function(t,e,n){t&&!S(t=n?t:t.prototype,Ie)&&je(t,Ie,{configurable:!0,value:e})},Ce=ke.IteratorPrototype,Le=function(){return this},Ne=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return R(n),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ae=ke.IteratorPrototype,Me=ke.BUGGY_SAFARI_ITERATORS,De=Bt("iterator"),Ge=function(){return this},Fe=function(t,e,n,r,o,i,u){!function(t,e,n){var r=e+" Iterator";t.prototype=ve(Ce,{next:l(1,n)}),Pe(t,r,!1),Ee[r]=Le}(n,e,r);var c,a,s,f=function(t){if(t===o&&d)return d;if(!Me&&t in v)return v[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},p=e+" Iterator",h=!1,v=t.prototype,y=v[De]||v["@@iterator"]||o&&v[o],d=!Me&&y||f(o),g="Array"==e&&v.entries||y;if(g&&(c=_e(g.call(new t)),Ae!==Object.prototype&&c.next&&(_e(c)!==Ae&&(Ne?Ne(c,Ae):"function"!=typeof c[De]&&I(c,De,Ge)),Pe(c,p,!0))),"values"==o&&y&&"values"!==y.name&&(h=!0,d=function(){return y.call(this)}),v[De]!==d&&I(v,De,d),Ee[e]=d,o)if(a={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},u)for(s in a)!Me&&!h&&s in v||nt(v,s,a[s]);else Pt({target:e,proto:!0,forced:Me||h},a);return a},Be=et.set,ze=et.getterFor("Array Iterator"),He=Fe(Array,"Array",(function(t,e){Be(this,{type:"Array Iterator",target:d(t),index:0,kind:e})}),(function(){var t=ze(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Ee.Arguments=Ee.Array,Se("keys"),Se("values"),Se("entries");var Ue=Bt("species"),We=[].slice,Ke=Math.max;Pt({target:"Array",proto:!0,forced:!Qt("slice")},{slice:function(t,e){var n,r,o,i=d(this),u=lt(i.length),c=ht(t,u),a=ht(void 0===e?u:e,u);if(Ct(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Ct(n.prototype)?g(n)&&null===(n=n[Ue])&&(n=void 0):n=void 0,n===Array||void 0===n))return We.call(i,c,a);for(r=new(void 0===n?Array:n)(Ke(a-c,0)),o=0;c<a;c++,o++)c in i&&Nt(r,o,i[c]);return r.length=o,r}});var Ve=Date.prototype,Ye=Ve.toString,qe=Ve.getTime;new Date(NaN)+""!="Invalid Date"&&nt(Ve,"toString",(function(){var t=qe.call(this);return t==t?Ye.call(this):"Invalid Date"}));var Qe=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),$e=n((function(t){var e=j.f,n=U("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},u=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!S(t,n)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!S(t,n)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Qe&&u.REQUIRED&&o(t)&&!S(t,n)&&i(t),t}};V[n]=!0})),Je=($e.REQUIRED,$e.fastKey,$e.getWeakData,$e.onFreeze,Bt("iterator")),Xe=Array.prototype,Ze={};Ze[Bt("toStringTag")]="z";var tn="[object z]"===String(Ze),en=Bt("toStringTag"),nn="Arguments"==p(function(){return arguments}()),rn=tn?p:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),en))?n:nn?p(e):"Object"==(r=p(e))&&"function"==typeof e.callee?"Arguments":r},on=Bt("iterator"),un=function(t,e,n,r){try{return r?e(R(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&R(o.call(t)),e}},cn=n((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var u,c,a,s,l,f,p,h,v=ee(n,r,o?2:1);if(i)u=t;else{if("function"!=typeof(c=function(t){if(null!=t)return t[on]||t["@@iterator"]||Ee[rn(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(h=c)&&(Ee.Array===h||Xe[Je]===h)){for(a=0,s=lt(t.length);s>a;a++)if((l=o?v(R(p=t[a])[0],p[1]):v(t[a]))&&l instanceof e)return l;return new e(!1)}u=c.call(t)}for(f=u.next;!(p=f.call(u)).done;)if("object"==typeof(l=un(u,v,p.value,o))&&l&&l instanceof e)return l;return new e(!1)}).stop=function(t){return new e(!0,t)}})),an=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},sn=Bt("iterator"),ln=!1;try{var fn=0,pn={next:function(){return{done:!!fn++}},return:function(){ln=!0}};pn[sn]=function(){return this},Array.from(pn,(function(){throw 2}))}catch(t){}var hn=function(t,e,n){var r=-1!==t.indexOf("Map"),u=-1!==t.indexOf("Weak"),c=r?"set":"add",a=o[t],s=a&&a.prototype,l=a,f={},p=function(t){var e=s[t];nt(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(u&&!g(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return u&&!g(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(u&&!g(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(jt(t,"function"!=typeof a||!(u||s.forEach&&!i((function(){(new a).entries().next()})))))l=n.getConstructor(e,t,r,c),$e.REQUIRED=!0;else if(jt(t,!0)){var h=new l,v=h[c](u?{}:-0,1)!=h,y=i((function(){h.has(1)})),d=function(t,e){if(!e&&!ln)return!1;var n=!1;try{var r={};r[sn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){new a(t)})),b=!u&&i((function(){for(var t=new a,e=5;e--;)t[c](e,e);return!t.has(-0)}));d||((l=e((function(e,n){an(e,l,t);var o=function(t,e,n){var r,o;return Ne&&"function"==typeof(r=e.constructor)&&r!==n&&g(o=r.prototype)&&o!==n.prototype&&Ne(t,o),t}(new a,e,l);return null!=n&&cn(n,o[c],o,r),o}))).prototype=s,s.constructor=l),(y||b)&&(p("delete"),p("has"),r&&p("get")),(b||v)&&p(c),u&&s.clear&&delete s.clear}return f[t]=l,Pt({global:!0,forced:l!=a},f),Pe(l,t),u||n.setStrong(l,t,r),l},vn=function(t,e,n){for(var r in e)nt(t,r,e[r],n);return t},yn=Bt("species"),dn=j.f,gn=$e.fastKey,bn=et.set,mn=et.getterFor,Sn={getConstructor:function(t,e,n,r){var o=t((function(t,i){an(t,o,e),bn(t,{type:e,index:ve(null),first:void 0,last:void 0,size:0}),u||(t.size=0),null!=i&&cn(i,t[r],t,n)})),i=mn(e),c=function(t,e,n){var r,o,c=i(t),s=a(t,e);return s?s.value=n:(c.last=s={index:o=gn(e,!0),key:e,value:n,previous:r=c.last,next:void 0,removed:!1},c.first||(c.first=s),r&&(r.next=s),u?c.size++:t.size++,"F"!==o&&(c.index[o]=s)),t},a=function(t,e){var n,r=i(t),o=gn(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return vn(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,u?t.size=0:this.size=0},delete:function(t){var e=i(this),n=a(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),u?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=i(this),r=ee(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),vn(o.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return c(this,0===t?0:t,e)}}:{add:function(t){return c(this,t=0===t?0:t,t)}}),u&&dn(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=mn(e),i=mn(r);Fe(t,e,(function(t,e){bn(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=it(t),n=j.f;u&&e&&!e[yn]&&n(e,yn,{configurable:!0,get:function(){return this}})}(e)}},En=(hn("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Sn),Object.assign),On=Object.defineProperty,wn=!En||i((function(){if(u&&1!==En({b:1},En(On({},"a",{enumerable:!0,get:function(){On(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=En({},t)[n]||"abcdefghijklmnopqrst"!=ce(En({},e)).join("")}))?function(t,e){for(var n=Lt(t),r=arguments.length,o=1,i=St.f,c=s.f;r>o;)for(var a,l=v(arguments[o++]),f=i?ce(l).concat(i(l)):ce(l),p=f.length,h=0;p>h;)a=f[h++],u&&!c.call(l,a)||(n[a]=l[a]);return n}:En;Pt({target:"Object",stat:!0,forced:Object.assign!==wn},{assign:wn});var xn=tn?{}.toString:function(){return"[object "+rn(this)+"]"};tn||nt(Object.prototype,"toString",xn,{unsafe:!0});var _n=function(){var t=R(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Tn(t,e){return RegExp(t,e)}var Rn,kn,jn={UNSUPPORTED_Y:i((function(){var t=Tn("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:i((function(){var t=Tn("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},In=RegExp.prototype.exec,Pn=String.prototype.replace,Cn=In,Ln=(Rn=/a/,kn=/b*/g,In.call(Rn,"a"),In.call(kn,"a"),0!==Rn.lastIndex||0!==kn.lastIndex),Nn=jn.UNSUPPORTED_Y||jn.BROKEN_CARET,An=void 0!==/()??/.exec("")[1];(Ln||An||Nn)&&(Cn=function(t){var e,n,r,o,i=this,u=Nn&&i.sticky,c=_n.call(i),a=i.source,s=0,l=t;return u&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),l=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(a="(?: "+a+")",l=" "+l,s++),n=new RegExp("^(?:"+a+")",c)),An&&(n=new RegExp("^"+a+"$(?!\\s)",c)),Ln&&(e=i.lastIndex),r=In.call(u?n:i,l),u?r?(r.input=r.input.slice(s),r[0]=r[0].slice(s),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Ln&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),An&&r&&r.length>1&&Pn.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var Mn=Cn;Pt({target:"RegExp",proto:!0,forced:/./.exec!==Mn},{exec:Mn});var Dn=RegExp.prototype,Gn=Dn.toString,Fn=i((function(){return"/a/b"!=Gn.call({source:"a",flags:"b"})})),Bn="toString"!=Gn.name;(Fn||Bn)&&nt(RegExp.prototype,"toString",(function(){var t=R(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Dn)?_n.call(t):n)}),{unsafe:!0});hn("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Sn);var zn=function(t){return function(e,n){var r,o,i=String(y(e)),u=at(n),c=i.length;return u<0||u>=c?t?"":void 0:(r=i.charCodeAt(u))<55296||r>56319||u+1===c||(o=i.charCodeAt(u+1))<56320||o>57343?t?i.charAt(u):r:t?i.slice(u,u+2):o-56320+(r-55296<<10)+65536}},Hn={codeAt:zn(!1),charAt:zn(!0)},Un=Hn.charAt,Wn=et.set,Kn=et.getterFor("String Iterator");Fe(String,"String",(function(t){Wn(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Kn(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Un(n,r),e.index+=t.length,{value:t,done:!1})}));var Vn=Bt("species"),Yn=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),qn="$0"==="a".replace(/./,"$0"),Qn=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),$n=Bt("match"),Jn=Bt("species"),Xn=Hn.charAt,Zn=function(t,e,n){return e+(n?Xn(t,e).length:1)},tr=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==p(t))throw TypeError("RegExp#exec called on incompatible receiver");return Mn.call(t,e)},er=[].push,nr=Math.min,rr=!i((function(){return!RegExp(4294967295,"y")}));!function(t,e,n,r){var o=Bt(t),u=!i((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),c=u&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Vn]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!u||!c||"replace"===t&&(!Yn||!qn)||"split"===t&&!Qn){var a=/./[o],s=n(o,""[t],(function(t,e,n,r,o){return e.exec===Mn?u&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:qn}),l=s[0],f=s[1];nt(String.prototype,t,l),nt(RegExp.prototype,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&I(RegExp.prototype[o],"sham",!0)}("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,o,i=String(y(this)),u=void 0===n?4294967295:n>>>0;if(0===u)return[];if(void 0===t)return[i];if(!g(r=t)||(void 0!==(o=r[$n])?!o:"RegExp"!=p(r)))return e.call(i,t,u);for(var c,a,s,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,v=new RegExp(t.source,f+"g");(c=Mn.call(v,i))&&!((a=v.lastIndex)>h&&(l.push(i.slice(h,c.index)),c.length>1&&c.index<i.length&&er.apply(l,c.slice(1)),s=c[0].length,h=a,l.length>=u));)v.lastIndex===c.index&&v.lastIndex++;return h===i.length?!s&&v.test("")||l.push(""):l.push(i.slice(h)),l.length>u?l.slice(0,u):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=y(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(String(o),e,n)},function(t,o){var i=n(r,t,this,o,r!==e);if(i.done)return i.value;var u=R(t),c=String(this),a=function(t,e){var n,r=R(t).constructor;return void 0===r||null==(n=R(r)[Jn])?e:te(n)}(u,RegExp),s=u.unicode,l=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(rr?"y":"g"),f=new a(rr?u:"^(?:"+u.source+")",l),p=void 0===o?4294967295:o>>>0;if(0===p)return[];if(0===c.length)return null===tr(f,c)?[c]:[];for(var h=0,v=0,y=[];v<c.length;){f.lastIndex=rr?v:0;var d,g=tr(f,rr?c:c.slice(v));if(null===g||(d=nr(lt(f.lastIndex+(rr?0:v)),c.length))===h)v=Zn(c,v,s);else{if(y.push(c.slice(h,v)),y.length===p)return y;for(var b=1;b<=g.length-1;b++)if(y.push(g[b]),y.length===p)return y;v=h=d}}return y.push(c.slice(h)),y}]}),!rr);var or={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var ir in or){var ur=o[ir],cr=ur&&ur.prototype;if(cr&&cr.forEach!==ie)try{I(cr,"forEach",ie)}catch(t){cr.forEach=ie}}var ar=Bt("iterator"),sr=Bt("toStringTag"),lr=He.values;for(var fr in or){var pr=o[fr],hr=pr&&pr.prototype;if(hr){if(hr[ar]!==lr)try{I(hr,ar,lr)}catch(t){hr[ar]=lr}if(hr[sr]||I(hr,sr,fr),or[fr])for(var vr in He)if(hr[vr]!==He[vr])try{I(hr,vr,He[vr])}catch(t){hr[vr]=He[vr]}}}function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function br(t){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Er(t,e,n){return(Er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=br(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const wr=new WeakMap,xr=new WeakMap;function _r(t){const e=wr.get(t);return console.assert(null!=e,"'this' is expected an Event object, but got",t),e}function Tr(t){null==t.passiveListener?t.event.cancelable&&(t.canceled=!0,"function"==typeof t.event.preventDefault&&t.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener)}function Rr(t,e){wr.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=Object.keys(e);for(let t=0;t<n.length;++t){const e=n[t];e in this||Object.defineProperty(this,e,kr(e))}}function kr(t){return{get(){return _r(this).event[t]},set(e){_r(this).event[t]=e},configurable:!0,enumerable:!0}}function jr(t){return{value(){const e=_r(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function Ir(t){if(null==t||t===Object.prototype)return Rr;let e=xr.get(t);return null==e&&(e=function(t,e){const n=Object.keys(e);if(0===n.length)return t;function r(e,n){t.call(this,e,n)}r.prototype=Object.create(t.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let o=0;o<n.length;++o){const i=n[o];if(!(i in t.prototype)){const t="function"==typeof Object.getOwnPropertyDescriptor(e,i).value;Object.defineProperty(r.prototype,i,t?jr(i):kr(i))}}return r}(Ir(Object.getPrototypeOf(t)),t),xr.set(t,e)),e}function Pr(t){return _r(t).immediateStopped}function Cr(t,e){_r(t).passiveListener=e}Rr.prototype={get type(){return _r(this).event.type},get target(){return _r(this).eventTarget},get currentTarget(){return _r(this).currentTarget},composedPath(){const t=_r(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return _r(this).eventPhase},stopPropagation(){const t=_r(this);t.stopped=!0,"function"==typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation(){const t=_r(this);t.stopped=!0,t.immediateStopped=!0,"function"==typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return Boolean(_r(this).event.bubbles)},get cancelable(){return Boolean(_r(this).event.cancelable)},preventDefault(){Tr(_r(this))},get defaultPrevented(){return _r(this).canceled},get composed(){return Boolean(_r(this).event.composed)},get timeStamp(){return _r(this).timeStamp},get srcElement(){return _r(this).eventTarget},get cancelBubble(){return _r(this).stopped},set cancelBubble(t){if(!t)return;const e=_r(this);e.stopped=!0,"boolean"==typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!_r(this).canceled},set returnValue(t){t||Tr(_r(this))},initEvent(){}},Object.defineProperty(Rr.prototype,"constructor",{value:Rr,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(Rr.prototype,window.Event.prototype),xr.set(window.Event.prototype,Rr));const Lr=new WeakMap,Nr=3;function Ar(t){return null!==t&&"object"==typeof t}function Mr(t){const e=Lr.get(t);if(null==e)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function Dr(t,e){Object.defineProperty(t,`on${e}`,function(t){return{get(){let e=Mr(this).get(t);for(;null!=e;){if(e.listenerType===Nr)return e.listener;e=e.next}return null},set(e){"function"==typeof e||Ar(e)||(e=null);const n=Mr(this);let r=null,o=n.get(t);for(;null!=o;)o.listenerType===Nr?null!==r?r.next=o.next:null!==o.next?n.set(t,o.next):n.delete(t):r=o,o=o.next;if(null!==e){const o={listener:e,listenerType:Nr,passive:!1,once:!1,next:null};null===r?n.set(t,o):r.next=o}},configurable:!0,enumerable:!0}}(e))}function Gr(t){function e(){Fr.call(this)}e.prototype=Object.create(Fr.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let n=0;n<t.length;++n)Dr(e.prototype,t[n]);return e}function Fr(){if(!(this instanceof Fr)){if(1===arguments.length&&Array.isArray(arguments[0]))return Gr(arguments[0]);if(arguments.length>0){const t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return Gr(t)}throw new TypeError("Cannot call a class as a function")}Lr.set(this,new Map)}var Br,zr,Hr;Fr.prototype={addEventListener(t,e,n){if(null==e)return;if("function"!=typeof e&&!Ar(e))throw new TypeError("'listener' should be a function or an object.");const r=Mr(this),o=Ar(n),i=(o?Boolean(n.capture):Boolean(n))?1:2,u={listener:e,listenerType:i,passive:o&&Boolean(n.passive),once:o&&Boolean(n.once),next:null};let c=r.get(t);if(void 0===c)return void r.set(t,u);let a=null;for(;null!=c;){if(c.listener===e&&c.listenerType===i)return;a=c,c=c.next}a.next=u},removeEventListener(t,e,n){if(null==e)return;const r=Mr(this),o=(Ar(n)?Boolean(n.capture):Boolean(n))?1:2;let i=null,u=r.get(t);for(;null!=u;){if(u.listener===e&&u.listenerType===o)return void(null!==i?i.next=u.next:null!==u.next?r.set(t,u.next):r.delete(t));i=u,u=u.next}},dispatchEvent(t){if(null==t||"string"!=typeof t.type)throw new TypeError('"event.type" should be a string.');const e=Mr(this),n=t.type;let r=e.get(n);if(null==r)return!0;const o=function(t,e){return new(Ir(Object.getPrototypeOf(e)))(t,e)}(this,t);let i=null;for(;null!=r;){if(r.once?null!==i?i.next=r.next:null!==r.next?e.set(n,r.next):e.delete(n):i=r,Cr(o,r.passive?r.listener:null),"function"==typeof r.listener)try{r.listener.call(this,o)}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}else r.listenerType!==Nr&&"function"==typeof r.listener.handleEvent&&r.listener.handleEvent(o);if(Pr(o))break;r=r.next}return Cr(o,null),function(t,e){_r(t).eventPhase=e}(o,0),function(t,e){_r(t).currentTarget=e}(o,null),!o.defaultPrevented}},Object.defineProperty(Fr.prototype,"constructor",{value:Fr,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(Fr.prototype,window.EventTarget.prototype),(Br=t.RcSocketReadyState||(t.RcSocketReadyState={}))[Br.CONNECTING=0]="CONNECTING",Br[Br.OPEN=1]="OPEN",Br[Br.CLOSING=2]="CLOSING",Br[Br.CLOSED=3]="CLOSED",(zr=t.RcSocketCloseType||(t.RcSocketCloseType={}))[zr.FORCE=0]="FORCE",zr[zr.KILL=1]="KILL",zr[zr.RETRY=2]="RETRY",(Hr=t.RcSocketEventHandlerName||(t.RcSocketEventHandlerName={})).CONNECTING="onconnecting",Hr.TIMEOUT="ontimeout",Hr.ERROR="onerror",Hr.OPEN="onopen",Hr.MESSAGE="onmessage",Hr.CLOSING="onclosing",Hr.CLOSE="onclose";var Ur=function(e){function n(e,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),i=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Sr(t):e}(this,br(n).call(this)),gr(Sr(i),"settings",{debug:n.defaultSettings.debug,logger:n.defaultSettings.logger,connectionTimeout:n.defaultSettings.connectionTimeout,connectionMaxRetryInterval:n.defaultSettings.connectionMaxRetryInterval}),gr(Sr(i),"url",void 0),gr(Sr(i),"protocols",void 0),gr(Sr(i),"onclose",null),gr(Sr(i),"onerror",null),gr(Sr(i),"onmessage",null),gr(Sr(i),"onopen",null),gr(Sr(i),"ontimeout",null),gr(Sr(i),"onconnecting",null),gr(Sr(i),"onclosing",null),gr(Sr(i),"readyState",t.RcSocketReadyState.CONNECTING),gr(Sr(i),"queue",[]),gr(Sr(i),"_ws",null),gr(Sr(i),"_attempts",1),gr(Sr(i),"_shouldReopen",!1),gr(Sr(i),"_closeType",null),gr(Sr(i),"_connectTimer",null),gr(Sr(i),"_listeners",new Map),i.url=e,i.protocols=r,Object.assign(i.settings,o),setTimeout((function(){return i.open()}),0),i}var r,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}(n,e),r=n,(o=[{key:"open",value:function(){!this.readyState||this.readyState>WebSocket.CLOSING?(this.reset(),this._connect()):this.readyState===WebSocket.CLOSING&&(this._shouldReopen=!0)}},{key:"send",value:function(t){return this.readyState===WebSocket.OPEN?this._send(t):this.queue.push(t)}},{key:"close",value:function(){this._close(t.RcSocketCloseType.FORCE)}},{key:"kill",value:function(){this._close(t.RcSocketCloseType.KILL),this.reset()}},{key:"reboot",value:function(){this.kill(),this._connect()}},{key:"reset",value:function(){this._stop(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.onerror=null),this._ws=null,this.readyState=t.RcSocketReadyState.CONNECTING,this._closeType=null,this._shouldReopen=!1,this._attempts=1}},{key:"addEventListener",value:function(t,e,r){var o=this,i=this._getListenerKey(t,r),u=this._listeners.get(i)||new Set;return this._listeners.set(i,u.add(e)),Er(br(n.prototype),"addEventListener",this).call(this,t,e,r),function(){return o.removeEventListener(t,e,r)}}},{key:"removeEventListener",value:function(t,e,r){var o=this._getListenerKey(t,r),i=this._listeners.get(o);i&&(i.delete(e),!i.size&&this._listeners.delete(o)),Er(br(n.prototype),"removeEventListener",this).call(this,t,e,r)}},{key:"removeAllEventListeners",value:function(){var t=this;this._listeners.forEach((function(e,n){var r=Or(n.split("ðŸš§"),2),o=r[0],i=r[1],u="undefined"===i?void 0:"true"===i;e.forEach((function(e){return t.removeEventListener(o,e,u)}))})),this._listeners.clear()}},{key:"_connect",value:function(){var e=this;this._ws=Object.assign(new WebSocket(this.url,this.protocols),{id:Date.now()}),this._ws.onopen=this._onopen.bind(this),this._ws.onclose=this._onclose.bind(this),this._ws.onmessage=this._onmessage.bind(this),this._ws.onerror=this._onerror.bind(this),this._connectTimer=setTimeout((function(){e._trigger(t.RcSocketEventHandlerName.TIMEOUT),e._close(t.RcSocketCloseType.RETRY)}),this.settings.connectionTimeout),this._stateChanged(t.RcSocketReadyState.CONNECTING,t.RcSocketEventHandlerName.CONNECTING)}},{key:"_stop",value:function(){this._connectTimer&&(clearTimeout(this._connectTimer),this._connectTimer=null)}},{key:"_onopen",value:function(e){if(this._connectTimer&&(clearTimeout(this._connectTimer),this._connectTimer=null),this._closeType===t.RcSocketCloseType.FORCE)return this.close();this._attempts=1,this._stateChanged(t.RcSocketReadyState.OPEN,t.RcSocketEventHandlerName.OPEN,e),this._sendQueued()}},{key:"_onclose",value:function(e){this._stop(),this._ws=null,this._closeType===t.RcSocketCloseType.FORCE?(this._stateChanged(t.RcSocketReadyState.CLOSED,t.RcSocketEventHandlerName.CLOSE,Object.assign(e,{forced:!0})),this._shouldReopen&&this.open()):(this._closeType!==t.RcSocketCloseType.RETRY&&this._trigger(t.RcSocketEventHandlerName.CLOSE,e),this._reconnect())}},{key:"_onmessage",value:function(e){this._trigger(t.RcSocketEventHandlerName.MESSAGE,e)}},{key:"_onerror",value:function(e){this._trigger(t.RcSocketEventHandlerName.ERROR,e)}},{key:"_close",value:function(e){this._closeType=e,this._shouldReopen=!1,this._ws&&this.readyState<WebSocket.CLOSING&&(this._ws.close(),this._stateChanged(t.RcSocketReadyState.CLOSING,t.RcSocketEventHandlerName.CLOSING))}},{key:"_reconnect",value:function(){var t=this,e=1e3*(Math.pow(2,this._attempts)-1);e=e>this.settings.connectionMaxRetryInterval?this.settings.connectionMaxRetryInterval:e,this._attempts++,setTimeout((function(){return t._connect()}),e)}},{key:"_send",value:function(t){this._ws&&this._sendPayload(JSON.stringify(t))}},{key:"_sendPayload",value:function(t){this._ws&&this._ws.send(t)}},{key:"_sendQueued",value:function(){var t=this;this.queue.forEach((function(e){return t._send(e)}))}},{key:"_getListenerKey",value:function(t,e){var n="object"===yr(e)?e.capture:e;return"boolean"==typeof n?"".concat(t,"ðŸš§").concat(n.toString()):"".concat(t,"ðŸš§undefined")}},{key:"_stateChanged",value:function(t,e,n){this.readyState=t,this._trigger(e,n)}},{key:"_trigger",value:function(t,e){var n=void 0===e?new Event(t.slice(2)):new e.constructor(e.type,e);this.settings.debug&&this.settings.logger.debug("RcSocket",t,this.url,n);var r=this[t];r&&r.call(this._ws,n),this.dispatchEvent(n)}}])&&dr(r.prototype,o),i&&dr(r,i),n}(Fr);gr(Ur,"defaultSettings",{debug:!1,logger:console,connectionTimeout:2500,connectionMaxRetryInterval:1e3}),t.default=Ur,Object.defineProperty(t,"__esModule",{value:!0})}));
