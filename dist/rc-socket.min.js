!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).RcSocket={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),i=function(t){try{return!!t()}catch(t){return!0}},c=!i((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),u={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,a={f:s&&!u.call({1:2},1)?function(t){var e=s(this,t);return!!e&&e.enumerable}:u},l=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,p=function(t){return f.call(t).slice(8,-1)},h="".split,d=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==p(t)?h.call(t,""):Object(t)}:Object,v=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},g=function(t){return d(v(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,m=function(t,e){return b.call(t,e)},_=o.document,E=y(_)&&y(_.createElement),O=function(t){return E?_.createElement(t):{}},R=!c&&!i((function(){return 7!=Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a})),x=Object.getOwnPropertyDescriptor,w={f:c?x:function(t,e){if(t=g(t),e=S(e,!0),R)try{return x(t,e)}catch(t){}if(m(t,e))return l(!a.f.call(t,e),t[e])}},T=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},I=Object.defineProperty,k={f:c?I:function(t,e,n){if(T(t),e=S(e,!0),T(n),R)try{return I(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},j=c?function(t,e,n){return k.f(t,e,l(1,n))}:function(t,e,n){return t[e]=n,t},C=function(t,e){try{j(o,t,e)}catch(n){o[t]=e}return e},L=o["__core-js_shared__"]||C("__core-js_shared__",{}),N=Function.toString;"function"!=typeof L.inspectSource&&(L.inspectSource=function(t){return N.call(t)});var P,A,M,D=L.inspectSource,G=o.WeakMap,F="function"==typeof G&&/native code/.test(D(G)),z=n((function(t){(t.exports=function(t,e){return L[t]||(L[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.0",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),H=0,K=Math.random(),U=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+K).toString(36)},W=z("keys"),Y=function(t){return W[t]||(W[t]=U(t))},V={},q=o.WeakMap;if(F){var B=new q,Q=B.get,$=B.has,J=B.set;P=function(t,e){return J.call(B,t,e),e},A=function(t){return Q.call(B,t)||{}},M=function(t){return $.call(B,t)}}else{var X=Y("state");V[X]=!0,P=function(t,e){return j(t,X,e),e},A=function(t){return m(t,X)?t[X]:{}},M=function(t){return m(t,X)}}var Z={set:P,get:A,has:M,enforce:function(t){return M(t)?A(t):P(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=A(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},tt=n((function(t){var e=Z.get,n=Z.enforce,r=String(String).split("String");(t.exports=function(t,e,i,c){var u=!!c&&!!c.unsafe,s=!!c&&!!c.enumerable,a=!!c&&!!c.noTargetGet;"function"==typeof i&&("string"!=typeof e||m(i,"name")||j(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==o?(u?!a&&t[e]&&(s=!0):delete t[e],s?t[e]=i:j(t,e,i)):s?t[e]=i:C(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||D(this)}))})),et=o,nt=function(t){return"function"==typeof t?t:void 0},rt=function(t,e){return arguments.length<2?nt(et[t])||nt(o[t]):et[t]&&et[t][e]||o[t]&&o[t][e]},ot=Math.ceil,it=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?it:ot)(t)},ut=Math.min,st=function(t){return t>0?ut(ct(t),9007199254740991):0},at=Math.max,lt=Math.min,ft=function(t,e){var n=ct(t);return n<0?at(n+e,0):lt(n,e)},pt=function(t){return function(e,n,r){var o,i=g(e),c=st(i.length),u=ft(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},ht={includes:pt(!0),indexOf:pt(!1)}.indexOf,dt=function(t,e){var n,r=g(t),o=0,i=[];for(n in r)!m(V,n)&&m(r,n)&&i.push(n);for(;e.length>o;)m(r,n=e[o++])&&(~ht(i,n)||i.push(n));return i},vt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gt=vt.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return dt(t,gt)}},St={f:Object.getOwnPropertySymbols},bt=rt("Reflect","ownKeys")||function(t){var e=yt.f(T(t)),n=St.f;return n?e.concat(n(t)):e},mt=function(t,e){for(var n=bt(e),r=k.f,o=w.f,i=0;i<n.length;i++){var c=n[i];m(t,c)||r(t,c,o(e,c))}},_t=/#|\.prototype\./,Et=function(t,e){var n=Rt[Ot(t)];return n==wt||n!=xt&&("function"==typeof e?i(e):!!e)},Ot=Et.normalize=function(t){return String(t).replace(_t,".").toLowerCase()},Rt=Et.data={},xt=Et.NATIVE="N",wt=Et.POLYFILL="P",Tt=Et,It=w.f,kt=function(t,e){var n,r,i,c,u,s=t.target,a=t.global,l=t.stat;if(n=a?o:l?o[s]||C(s,{}):(o[s]||{}).prototype)for(r in e){if(c=e[r],i=t.noTargetGet?(u=It(n,r))&&u.value:n[r],!Tt(a?r:s+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof c==typeof i)continue;mt(c,i)}(t.sham||i&&i.sham)&&j(c,"sham",!0),tt(n,r,c,t)}},jt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Ct=function(t,e,n){if(jt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Lt=function(t){return Object(v(t))},Nt=Array.isArray||function(t){return"Array"==p(t)},Pt=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),At=Pt&&!Symbol.sham&&"symbol"==typeof Symbol(),Mt=z("wks"),Dt=o.Symbol,Gt=At?Dt:U,Ft=function(t){return m(Mt,t)||(Pt&&m(Dt,t)?Mt[t]=Dt[t]:Mt[t]=Gt("Symbol."+t)),Mt[t]},zt=Ft("species"),Ht=function(t,e){var n;return Nt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Nt(n.prototype)?y(n)&&null===(n=n[zt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Kt=[].push,Ut=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,c=5==t||i;return function(u,s,a,l){for(var f,p,h=Lt(u),v=d(h),g=Ct(s,a,3),y=st(v.length),S=0,b=l||Ht,m=e?b(u,y):n?b(u,0):void 0;y>S;S++)if((c||S in v)&&(p=g(f=v[S],S,h),t))if(e)m[S]=p;else if(p)switch(t){case 3:return!0;case 5:return f;case 6:return S;case 2:Kt.call(m,f)}else if(o)return!1;return i?-1:r||o?o:m}},Wt={forEach:Ut(0),map:Ut(1),filter:Ut(2),some:Ut(3),every:Ut(4),find:Ut(5),findIndex:Ut(6)}.forEach,Yt=function(t,e){var n=[][t];return!n||!i((function(){n.call(null,e||function(){throw 1},1)}))}("forEach")?function(t){return Wt(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;kt({target:"Array",proto:!0,forced:[].forEach!=Yt},{forEach:Yt});var Vt,qt=Object.keys||function(t){return dt(t,vt)},Bt=c?Object.defineProperties:function(t,e){T(t);for(var n,r=qt(e),o=r.length,i=0;o>i;)k.f(t,n=r[i++],e[n]);return t},Qt=rt("document","documentElement"),$t=Y("IE_PROTO"),Jt=function(){},Xt=function(t){return"<script>"+t+"<\/script>"},Zt=function(){try{Vt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Zt=Vt?function(t){t.write(Xt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Vt):((e=O("iframe")).style.display="none",Qt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Xt("document.F=Object")),t.close(),t.F);for(var n=vt.length;n--;)delete Zt.prototype[vt[n]];return Zt()};V[$t]=!0;var te=Object.create||function(t,e){var n;return null!==t?(Jt.prototype=T(t),n=new Jt,Jt.prototype=null,n[$t]=t):n=Zt(),void 0===e?n:Bt(n,e)},ee=Ft("unscopables"),ne=Array.prototype;null==ne[ee]&&k.f(ne,ee,{configurable:!0,value:te(null)});var re,oe,ie,ce=function(t){ne[ee][t]=!0},ue={},se=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),ae=Y("IE_PROTO"),le=Object.prototype,fe=se?Object.getPrototypeOf:function(t){return t=Lt(t),m(t,ae)?t[ae]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?le:null},pe=Ft("iterator"),he=!1;[].keys&&("next"in(ie=[].keys())?(oe=fe(fe(ie)))!==Object.prototype&&(re=oe):he=!0),null==re&&(re={}),m(re,pe)||j(re,pe,(function(){return this}));var de={IteratorPrototype:re,BUGGY_SAFARI_ITERATORS:he},ve=k.f,ge=Ft("toStringTag"),ye=function(t,e,n){t&&!m(t=n?t:t.prototype,ge)&&ve(t,ge,{configurable:!0,value:e})},Se=de.IteratorPrototype,be=function(){return this},me=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return T(n),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),_e=de.IteratorPrototype,Ee=de.BUGGY_SAFARI_ITERATORS,Oe=Ft("iterator"),Re=function(){return this},xe=function(t,e,n,r,o,i,c){!function(t,e,n){var r=e+" Iterator";t.prototype=te(Se,{next:l(1,n)}),ye(t,r,!1),ue[r]=be}(n,e,r);var u,s,a,f=function(t){if(t===o&&g)return g;if(!Ee&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},p=e+" Iterator",h=!1,d=t.prototype,v=d[Oe]||d["@@iterator"]||o&&d[o],g=!Ee&&v||f(o),y="Array"==e&&d.entries||v;if(y&&(u=fe(y.call(new t)),_e!==Object.prototype&&u.next&&(fe(u)!==_e&&(me?me(u,_e):"function"!=typeof u[Oe]&&j(u,Oe,Re)),ye(u,p,!0))),"values"==o&&v&&"values"!==v.name&&(h=!0,g=function(){return v.call(this)}),d[Oe]!==g&&j(d,Oe,g),ue[e]=g,o)if(s={values:f("values"),keys:i?g:f("keys"),entries:f("entries")},c)for(a in s)!Ee&&!h&&a in d||tt(d,a,s[a]);else kt({target:e,proto:!0,forced:Ee||h},s);return s},we=Z.set,Te=Z.getterFor("Array Iterator"),Ie=xe(Array,"Array",(function(t,e){we(this,{type:"Array Iterator",target:g(t),index:0,kind:e})}),(function(){var t=Te(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ue.Arguments=ue.Array,ce("keys"),ce("values"),ce("entries");var ke,je,Ce=rt("navigator","userAgent")||"",Le=o.process,Ne=Le&&Le.versions,Pe=Ne&&Ne.v8;Pe?je=(ke=Pe.split("."))[0]+ke[1]:Ce&&(!(ke=Ce.match(/Edge\/(\d+)/))||ke[1]>=74)&&(ke=Ce.match(/Chrome\/(\d+)/))&&(je=ke[1]);var Ae=je&&+je,Me=Ft("species"),De=Ft("species"),Ge=[].slice,Fe=Math.max;kt({target:"Array",proto:!0,forced:!function(t){return Ae>=51||!i((function(){var e=[];return(e.constructor={})[Me]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("slice")},{slice:function(t,e){var n,r,o,i,c,u,s,a=g(this),f=st(a.length),p=ft(t,f),h=ft(void 0===e?f:e,f);if(Nt(a)&&("function"!=typeof(n=a.constructor)||n!==Array&&!Nt(n.prototype)?y(n)&&null===(n=n[De])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ge.call(a,p,h);for(r=new(void 0===n?Array:n)(Fe(h-p,0)),o=0;p<h;p++,o++)p in a&&(i=r,c=o,u=a[p],s=void 0,(s=S(c))in i?k.f(i,s,l(0,u)):i[s]=u);return r.length=o,r}});var ze=Date.prototype,He=ze.toString,Ke=ze.getTime;new Date(NaN)+""!="Invalid Date"&&tt(ze,"toString",(function(){var t=Ke.call(this);return t==t?He.call(this):"Invalid Date"}));var Ue=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),We=n((function(t){var e=k.f,n=U("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},c=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!m(t,n)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!m(t,n)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Ue&&c.REQUIRED&&o(t)&&!m(t,n)&&i(t),t}};V[n]=!0})),Ye=(We.REQUIRED,We.fastKey,We.getWeakData,We.onFreeze,Ft("iterator")),Ve=Array.prototype,qe={};qe[Ft("toStringTag")]="z";var Be="[object z]"===String(qe),Qe=Ft("toStringTag"),$e="Arguments"==p(function(){return arguments}()),Je=Be?p:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Qe))?n:$e?p(e):"Object"==(r=p(e))&&"function"==typeof e.callee?"Arguments":r},Xe=Ft("iterator"),Ze=function(t,e,n,r){try{return r?e(T(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&T(o.call(t)),e}},tn=n((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var c,u,s,a,l,f,p,h,d=Ct(n,r,o?2:1);if(i)c=t;else{if("function"!=typeof(u=function(t){if(null!=t)return t[Xe]||t["@@iterator"]||ue[Je(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(h=u)&&(ue.Array===h||Ve[Ye]===h)){for(s=0,a=st(t.length);a>s;s++)if((l=o?d(T(p=t[s])[0],p[1]):d(t[s]))&&l instanceof e)return l;return new e(!1)}c=u.call(t)}for(f=c.next;!(p=f.call(c)).done;)if("object"==typeof(l=Ze(c,d,p.value,o))&&l&&l instanceof e)return l;return new e(!1)}).stop=function(t){return new e(!0,t)}})),en=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},nn=Ft("iterator"),rn=!1;try{var on=0,cn={next:function(){return{done:!!on++}},return:function(){rn=!0}};cn[nn]=function(){return this},Array.from(cn,(function(){throw 2}))}catch(t){}var un=function(t,e,n){var r=-1!==t.indexOf("Map"),c=-1!==t.indexOf("Weak"),u=r?"set":"add",s=o[t],a=s&&s.prototype,l=s,f={},p=function(t){var e=a[t];tt(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(c&&!y(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return c&&!y(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(c&&!y(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Tt(t,"function"!=typeof s||!(c||a.forEach&&!i((function(){(new s).entries().next()})))))l=n.getConstructor(e,t,r,u),We.REQUIRED=!0;else if(Tt(t,!0)){var h=new l,d=h[u](c?{}:-0,1)!=h,v=i((function(){h.has(1)})),g=function(t,e){if(!e&&!rn)return!1;var n=!1;try{var r={};r[nn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){new s(t)})),S=!c&&i((function(){for(var t=new s,e=5;e--;)t[u](e,e);return!t.has(-0)}));g||((l=e((function(e,n){en(e,l,t);var o=function(t,e,n){var r,o;return me&&"function"==typeof(r=e.constructor)&&r!==n&&y(o=r.prototype)&&o!==n.prototype&&me(t,o),t}(new s,e,l);return null!=n&&tn(n,o[u],o,r),o}))).prototype=a,a.constructor=l),(v||S)&&(p("delete"),p("has"),r&&p("get")),(S||d)&&p(u),c&&a.clear&&delete a.clear}return f[t]=l,kt({global:!0,forced:l!=s},f),ye(l,t),c||n.setStrong(l,t,r),l},sn=function(t,e,n){for(var r in e)tt(t,r,e[r],n);return t},an=Ft("species"),ln=k.f,fn=We.fastKey,pn=Z.set,hn=Z.getterFor,dn={getConstructor:function(t,e,n,r){var o=t((function(t,i){en(t,o,e),pn(t,{type:e,index:te(null),first:void 0,last:void 0,size:0}),c||(t.size=0),null!=i&&tn(i,t[r],t,n)})),i=hn(e),u=function(t,e,n){var r,o,u=i(t),a=s(t,e);return a?a.value=n:(u.last=a={index:o=fn(e,!0),key:e,value:n,previous:r=u.last,next:void 0,removed:!1},u.first||(u.first=a),r&&(r.next=a),c?u.size++:t.size++,"F"!==o&&(u.index[o]=a)),t},s=function(t,e){var n,r=i(t),o=fn(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return sn(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,c?t.size=0:this.size=0},delete:function(t){var e=i(this),n=s(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),c?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=i(this),r=Ct(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),sn(o.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),c&&ln(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=hn(e),i=hn(r);xe(t,e,(function(t,e){pn(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=rt(t),n=k.f;c&&e&&!e[an]&&n(e,an,{configurable:!0,get:function(){return this}})}(e)}},vn=(un("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),dn),Object.assign),gn=Object.defineProperty,yn=!vn||i((function(){if(c&&1!==vn({b:1},vn(gn({},"a",{enumerable:!0,get:function(){gn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=vn({},t)[n]||"abcdefghijklmnopqrst"!=qt(vn({},e)).join("")}))?function(t,e){for(var n=Lt(t),r=arguments.length,o=1,i=St.f,u=a.f;r>o;)for(var s,l=d(arguments[o++]),f=i?qt(l).concat(i(l)):qt(l),p=f.length,h=0;p>h;)s=f[h++],c&&!u.call(l,s)||(n[s]=l[s]);return n}:vn;kt({target:"Object",stat:!0,forced:Object.assign!==yn},{assign:yn});var Sn=Be?{}.toString:function(){return"[object "+Je(this)+"]"};Be||tt(Object.prototype,"toString",Sn,{unsafe:!0});var bn=function(){var t=T(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function mn(t,e){return RegExp(t,e)}var _n,En,On={UNSUPPORTED_Y:i((function(){var t=mn("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:i((function(){var t=mn("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Rn=RegExp.prototype.exec,xn=String.prototype.replace,wn=Rn,Tn=(_n=/a/,En=/b*/g,Rn.call(_n,"a"),Rn.call(En,"a"),0!==_n.lastIndex||0!==En.lastIndex),In=On.UNSUPPORTED_Y||On.BROKEN_CARET,kn=void 0!==/()??/.exec("")[1];(Tn||kn||In)&&(wn=function(t){var e,n,r,o,i=this,c=In&&i.sticky,u=bn.call(i),s=i.source,a=0,l=t;return c&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),l=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(s="(?: "+s+")",l=" "+l,a++),n=new RegExp("^(?:"+s+")",u)),kn&&(n=new RegExp("^"+s+"$(?!\\s)",u)),Tn&&(e=i.lastIndex),r=Rn.call(c?n:i,l),c?r?(r.input=r.input.slice(a),r[0]=r[0].slice(a),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Tn&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),kn&&r&&r.length>1&&xn.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var jn=wn;kt({target:"RegExp",proto:!0,forced:/./.exec!==jn},{exec:jn});var Cn=RegExp.prototype,Ln=Cn.toString,Nn=i((function(){return"/a/b"!=Ln.call({source:"a",flags:"b"})})),Pn="toString"!=Ln.name;(Nn||Pn)&&tt(RegExp.prototype,"toString",(function(){var t=T(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Cn)?bn.call(t):n)}),{unsafe:!0});un("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),dn);var An=function(t){return function(e,n){var r,o,i=String(v(e)),c=ct(n),u=i.length;return c<0||c>=u?t?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===u||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):r:t?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}},Mn={codeAt:An(!1),charAt:An(!0)},Dn=Mn.charAt,Gn=Z.set,Fn=Z.getterFor("String Iterator");xe(String,"String",(function(t){Gn(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Fn(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Dn(n,r),e.index+=t.length,{value:t,done:!1})}));var zn=Ft("species"),Hn=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Kn="$0"==="a".replace(/./,"$0"),Un=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Wn=Ft("match"),Yn=Ft("species"),Vn=Mn.charAt,qn=function(t,e,n){return e+(n?Vn(t,e).length:1)},Bn=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==p(t))throw TypeError("RegExp#exec called on incompatible receiver");return jn.call(t,e)},Qn=[].push,$n=Math.min,Jn=!i((function(){return!RegExp(4294967295,"y")}));!function(t,e,n,r){var o=Ft(t),c=!i((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),u=c&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[zn]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!c||!u||"replace"===t&&(!Hn||!Kn)||"split"===t&&!Un){var s=/./[o],a=n(o,""[t],(function(t,e,n,r,o){return e.exec===jn?c&&!o?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Kn}),l=a[0],f=a[1];tt(String.prototype,t,l),tt(RegExp.prototype,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&j(RegExp.prototype[o],"sham",!0)}("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,o,i=String(v(this)),c=void 0===n?4294967295:n>>>0;if(0===c)return[];if(void 0===t)return[i];if(!y(r=t)||(void 0!==(o=r[Wn])?!o:"RegExp"!=p(r)))return e.call(i,t,c);for(var u,s,a,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=new RegExp(t.source,f+"g");(u=jn.call(d,i))&&!((s=d.lastIndex)>h&&(l.push(i.slice(h,u.index)),u.length>1&&u.index<i.length&&Qn.apply(l,u.slice(1)),a=u[0].length,h=s,l.length>=c));)d.lastIndex===u.index&&d.lastIndex++;return h===i.length?!a&&d.test("")||l.push(""):l.push(i.slice(h)),l.length>c?l.slice(0,c):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=v(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(String(o),e,n)},function(t,o){var i=n(r,t,this,o,r!==e);if(i.done)return i.value;var c=T(t),u=String(this),s=function(t,e){var n,r=T(t).constructor;return void 0===r||null==(n=T(r)[Yn])?e:jt(n)}(c,RegExp),a=c.unicode,l=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(Jn?"y":"g"),f=new s(Jn?c:"^(?:"+c.source+")",l),p=void 0===o?4294967295:o>>>0;if(0===p)return[];if(0===u.length)return null===Bn(f,u)?[u]:[];for(var h=0,d=0,v=[];d<u.length;){f.lastIndex=Jn?d:0;var g,y=Bn(f,Jn?u:u.slice(d));if(null===y||(g=$n(st(f.lastIndex+(Jn?0:d)),u.length))===h)d=qn(u,d,a);else{if(v.push(u.slice(h,d)),v.length===p)return v;for(var S=1;S<=y.length-1;S++)if(v.push(y[S]),v.length===p)return v;d=h=g}}return v.push(u.slice(h)),v}]}),!Jn);var Xn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Zn in Xn){var tr=o[Zn],er=tr&&tr.prototype;if(er&&er.forEach!==Yt)try{j(er,"forEach",Yt)}catch(t){er.forEach=Yt}}var nr,rr,or,ir=Ft("iterator"),cr=Ft("toStringTag"),ur=Ie.values;for(var sr in Xn){var ar=o[sr],lr=ar&&ar.prototype;if(lr){if(lr[ir]!==ur)try{j(lr,ir,ur)}catch(t){lr[ir]=ur}if(lr[cr]||j(lr,cr,sr),Xn[sr])for(var fr in Ie)if(lr[fr]!==Ie[fr])try{j(lr,fr,Ie[fr])}catch(t){lr[fr]=Ie[fr]}}}function pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dr(t,e){return(dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vr(t,e,n){return(vr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&dr(o,n.prototype),o}).apply(null,arguments)}function gr(t){var e="function"==typeof Map?new Map:void 0;return(gr=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return vr(t,arguments,hr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),dr(r,t)})(t)}function yr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(nr=t.RcSocketReadyState||(t.RcSocketReadyState={}))[nr.CONNECTING=0]="CONNECTING",nr[nr.OPEN=1]="OPEN",nr[nr.CLOSING=2]="CLOSING",nr[nr.CLOSED=3]="CLOSED",(rr=t.RcSocketCloseType||(t.RcSocketCloseType={}))[rr.FORCE=0]="FORCE",rr[rr.KILL=1]="KILL",rr[rr.RETRY=2]="RETRY",(or=t.RcSocketEventHandlerName||(t.RcSocketEventHandlerName={})).CONNECTING="onconnecting",or.TIMEOUT="ontimeout",or.ERROR="onerror",or.OPEN="onopen",or.MESSAGE="onmessage",or.CLOSING="onclosing",or.CLOSE="onclose";var Sr=function(e){var n,r;function o(n,r,i){var c;return pr(yr(c=e.call(this)||this),"settings",{debug:o.defaultSettings.debug,logger:o.defaultSettings.logger,connectionTimeout:o.defaultSettings.connectionTimeout,connectionMaxRetryInterval:o.defaultSettings.connectionMaxRetryInterval}),pr(yr(c),"url",void 0),pr(yr(c),"protocols",void 0),pr(yr(c),"onclose",null),pr(yr(c),"onerror",null),pr(yr(c),"onmessage",null),pr(yr(c),"onopen",null),pr(yr(c),"ontimeout",null),pr(yr(c),"onconnecting",null),pr(yr(c),"onclosing",null),pr(yr(c),"readyState",t.RcSocketReadyState.CONNECTING),pr(yr(c),"queue",[]),pr(yr(c),"_ws",null),pr(yr(c),"_attempts",1),pr(yr(c),"_shouldReopen",!1),pr(yr(c),"_closeType",null),pr(yr(c),"_connectTimer",null),pr(yr(c),"_listeners",new Map),c.url=n,c.protocols=r,Object.assign(c.settings,i),setTimeout((function(){return c.open()}),0),c}r=e,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=o.prototype;return i.open=function(){!this.readyState||this.readyState>WebSocket.CLOSING?(this.reset(),this._connect()):this.readyState===WebSocket.CLOSING&&(this._shouldReopen=!0)},i.send=function(t){return this.readyState===WebSocket.OPEN?this._send(t):this.queue.push(t)},i.close=function(){this._close(t.RcSocketCloseType.FORCE)},i.kill=function(){this._close(t.RcSocketCloseType.KILL),this.reset()},i.reboot=function(){this.kill(),this._connect()},i.reset=function(){this._stop(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.onerror=null),this._ws=null,this.readyState=t.RcSocketReadyState.CONNECTING,this._closeType=null,this._shouldReopen=!1,this._attempts=1},i.addEventListener=function(t,n,r){var o=this,i=this._getListenerKey(t,r),c=this._listeners.get(i)||new Set;return this._listeners.set(i,c.add(n)),e.prototype.addEventListener.call(this,t,n,r),function(){return o.removeEventListener(t,n,r)}},i.removeEventListener=function(t,n,r){var o=this._getListenerKey(t,r),i=this._listeners.get(o);i&&(i.delete(n),!i.size&&this._listeners.delete(o)),e.prototype.removeEventListener.call(this,t,n,r)},i.removeAllEventListeners=function(){var t=this;this._listeners.forEach((function(e,n){var r=n.split("ðŸš§"),o=r[0],i=r[1],c="undefined"===i?void 0:"true"===i;e.forEach((function(e){return t.removeEventListener(o,e,c)}))})),this._listeners.clear()},i._connect=function(){var e=this;this._ws=Object.assign(new WebSocket(this.url,this.protocols),{id:Date.now()}),this._ws.onopen=this._onopen.bind(this),this._ws.onclose=this._onclose.bind(this),this._ws.onmessage=this._onmessage.bind(this),this._ws.onerror=this._onerror.bind(this),this._connectTimer=setTimeout((function(){e._trigger(t.RcSocketEventHandlerName.TIMEOUT),e._close(t.RcSocketCloseType.RETRY)}),this.settings.connectionTimeout),this._stateChanged(t.RcSocketReadyState.CONNECTING,t.RcSocketEventHandlerName.CONNECTING)},i._stop=function(){this._connectTimer&&(clearTimeout(this._connectTimer),this._connectTimer=null)},i._onopen=function(e){if(this._connectTimer&&(clearTimeout(this._connectTimer),this._connectTimer=null),this._closeType===t.RcSocketCloseType.FORCE)return this.close();this._attempts=1,this._stateChanged(t.RcSocketReadyState.OPEN,t.RcSocketEventHandlerName.OPEN,e),this._sendQueued()},i._onclose=function(e){this._stop(),this._ws=null,this._closeType===t.RcSocketCloseType.FORCE?(this._stateChanged(t.RcSocketReadyState.CLOSED,t.RcSocketEventHandlerName.CLOSE,Object.assign(e,{forced:!0})),this._shouldReopen&&this.open()):(this._closeType!==t.RcSocketCloseType.RETRY&&this._trigger(t.RcSocketEventHandlerName.CLOSE,e),this._reconnect())},i._onmessage=function(e){this._trigger(t.RcSocketEventHandlerName.MESSAGE,e)},i._onerror=function(e){this._trigger(t.RcSocketEventHandlerName.ERROR,e)},i._close=function(e){this._closeType=e,this._shouldReopen=!1,this._ws&&this.readyState<WebSocket.CLOSING&&(this._ws.close(),this._stateChanged(t.RcSocketReadyState.CLOSING,t.RcSocketEventHandlerName.CLOSING))},i._reconnect=function(){var t=this,e=1e3*(Math.pow(2,this._attempts)-1);e=e>this.settings.connectionMaxRetryInterval?this.settings.connectionMaxRetryInterval:e,this._attempts++,setTimeout((function(){return t._connect()}),e)},i._send=function(t){this._ws&&this._sendPayload(JSON.stringify(t))},i._sendPayload=function(t){this._ws&&this._ws.send(t)},i._sendQueued=function(){var t=this;this.queue.forEach((function(e){return t._send(e)}))},i._getListenerKey=function(t,e){var n="object"==typeof e?e.capture:e;return"boolean"==typeof n?t+"ðŸš§"+n.toString():t+"ðŸš§undefined"},i._stateChanged=function(t,e,n){this.readyState=t,this._trigger(e,n)},i._trigger=function(t,e){var n=void 0===e?new Event(t.slice(2)):new e.constructor(e.type,e);this.settings.debug&&this.settings.logger.debug("RcSocket",t,this.url,n);var r=this[t];r&&r.call(this._ws,n),this.dispatchEvent(n)},o}(gr(EventTarget));pr(Sr,"defaultSettings",{debug:!1,logger:console,connectionTimeout:2500,connectionMaxRetryInterval:1e3}),t.default=Sr,Object.defineProperty(t,"__esModule",{value:!0})}));
